<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="light">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø© Ø¹Ù„Ù…ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø© - 7amodPro</title>
<style>
  :root {
    --bg-light: #f5f5f5;
    --text-light: #222;
    --btn-light: #ddd;
    --btn-hover-light: #ccc;
    --accent-light: #1976d2;

    --bg-dark: #121212;
    --text-dark: #eee;
    --btn-dark: #333;
    --btn-hover-dark: #444;
    --accent-dark: #90caf9;
  }

  [data-theme="light"] {
    --bg: var(--bg-light);
    --text: var(--text-light);
    --btn: var(--btn-light);
    --btn-hover: var(--btn-hover-light);
    --accent: var(--accent-light);
  }

  [data-theme="dark"] {
    --bg: var(--bg-dark);
    --text: var(--text-dark);
    --btn: var(--btn-dark);
    --btn-hover: var(--btn-hover-dark);
    --accent: var(--accent-dark);
  }

  body {
    margin: 0; padding: 0;
    background: var(--bg);
    color: var(--text);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    transition: background 0.3s, color 0.3s;
    flex-direction: column;
  }

  .calculator-container {
    max-width: 400px;
    width: 95%;
    background: var(--bg);
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(0,0,0,0.25);
    display: flex;
    flex-direction: column;
  }

  header {
    background: var(--accent);
    color: white;
    padding: 1rem;
    text-align: center;
    font-weight: bold;
    font-size: 1.3rem;
    user-select: none;
    position: relative;
    border-radius: 12px 12px 0 0;
  }

  header a {
    color: white;
    text-decoration: none;
    font-weight: normal;
    font-size: 0.9rem;
    display: block;
    margin-top: 5px;
  }

  #display {
    background: var(--btn);
    color: var(--text);
    font-size: 2.2rem;
    padding: 15px 20px;
    text-align: right;
    word-wrap: break-word;
    min-height: 60px;
    user-select: text;
  }

  /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
  .buttons-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    padding: 15px;
  }

  /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ø£Ø³ÙÙ„ */
  .advanced-buttons {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 10px;
    padding: 10px 15px 25px 15px;
    background: var(--btn);
    border-radius: 0 0 12px 12px;
  }

  button {
    background: var(--btn);
    border: none;
    border-radius: 8px;
    padding: 18px 0;
    font-size: 1.2rem;
    color: var(--text);
    cursor: pointer;
    user-select: none;
    transition: background 0.2s;
  }

  button:hover {
    background: var(--btn-hover);
  }

  button.operator {
    background: var(--accent);
    color: white;
  }

  button.equal {
    background: #4caf50;
    color: white;
    grid-column: span 4;
  }

  button.memory {
    background: #ff9800;
    color: white;
  }

  /* Ø²Ø± Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ Ø£Ø³ÙÙ„ */
  .theme-toggle-container {
    margin-top: 12px;
    text-align: center;
  }

  .theme-toggle-container button {
    background: var(--accent);
    border: none;
    color: white;
    font-size: 1.5rem;
    border-radius: 12px;
    padding: 10px 20px;
    cursor: pointer;
    user-select: none;
    transition: background 0.3s;
  }

  .theme-toggle-container button:hover {
    background: #145a86;
  }

  /* ØªØµØºÙŠØ± Ø§Ù„Ø®Ø· ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
  @media (max-width: 450px) {
    #display {
      font-size: 1.5rem;
      padding: 10px 15px;
      min-height: 45px;
    }
    button {
      font-size: 1rem;
      padding: 12px 0;
    }
    .advanced-buttons {
      grid-template-columns: repeat(3, 1fr);
    }
  }
</style>
</head>
<body>

<div class="calculator-container" role="application" aria-label="Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø© Ø¹Ù„Ù…ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©">
  <header>
    Advanced Calculator by 7amodPro
    <a href="https://youtube.com/@im7amodpro" target="_blank" rel="noopener noreferrer">Ø²ÙˆØ± Ù‚Ù†Ø§ØªÙŠ Ø¹Ù„Ù‰ ÙŠÙˆØªÙŠÙˆØ¨</a>
  </header>

  <div id="display" aria-live="polite" aria-atomic="true">0</div>

  <div class="buttons-grid" role="region" aria-label="Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©">
    <button class="memory" onclick="memoryClear()" title="Ù…Ø³Ø­ Ø§Ù„Ø°Ø§ÙƒØ±Ø©">MC</button>
    <button class="memory" onclick="memoryRecall()" title="Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©">MR</button>
    <button class="memory" onclick="memoryAdd()" title="Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø°Ø§ÙƒØ±Ø©">M+</button>
    <button class="memory" onclick="memorySubtract()" title="Ø·Ø±Ø­ Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©">M-</button>

    <button onclick="clearDisplay()" title="Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„">C</button>
    <button onclick="backspace()" title="Ø­Ø°Ù Ø¢Ø®Ø± Ø±Ù‚Ù…">âŒ«</button>
    <button onclick="toggleSign()" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø§Ø±Ø©">Â±</button>
    <button onclick="appendText('%')" class="operator" title="Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©">%</button>

    <button onclick="appendText('7')">7</button>
    <button onclick="appendText('8')">8</button>
    <button onclick="appendText('9')">9</button>
    <button onclick="appendText('-')" class="operator" title="Ø·Ø±Ø­">âˆ’</button>

    <button onclick="appendText('4')">4</button>
    <button onclick="appendText('5')">5</button>
    <button onclick="appendText('6')">6</button>
    <button onclick="appendText('*')" class="operator" title="Ø¶Ø±Ø¨">Ã—</button>

    <button onclick="appendText('1')">1</button>
    <button onclick="appendText('2')">2</button>
    <button onclick="appendText('3')">3</button>
    <button onclick="appendText('+')" class="operator" title="Ø¬Ù…Ø¹">+</button>

    <button onclick="appendText('0')">0</button>
    <button onclick="appendText('.')">.</button>
    <button onclick="appendText('/')" class="operator" title="Ù‚Ø³Ù…Ø©">Ã·</button>
  </div>

  <button onclick="calculate()" class="equal" title="ÙŠØ³Ø§ÙˆÙŠ">=</button>

  <div class="advanced-buttons" role="region" aria-label="Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©">
    <button onclick="appendText('Math.sqrt(')" title="Ø§Ù„Ø¬Ø°Ø± Ø§Ù„ØªØ±Ø¨ÙŠØ¹ÙŠ">âˆš</button>
    <button onclick="appendText('**2')" title="ØªØ±Ø¨ÙŠØ¹">xÂ²</button>
    <button onclick="appendText('**')" title="Ø£Ø³">xÊ¸</button>
    <button onclick="appendText('1/(')" title="Ù…Ù‚Ù„ÙˆØ¨ Ø§Ù„Ø±Ù‚Ù…">Â¹â„â‚“</button>
    <button onclick="appendText('Math.abs(')" title="Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø·Ù„Ù‚Ø©">|x|</button>
    <button onclick="appendText('Math.PI')" title="Ï€">Ï€</button>
    <button onclick="appendText('Math.E')" title="Ø§Ù„Ø«Ø§Ø¨Øª e">e</button>
    <button onclick="appendText('Math.sin(')" title="Ø¬ÙŠØ¨ Ø§Ù„Ø²Ø§ÙˆÙŠØ©">sin</button>
    <button onclick="appendText('Math.cos(')" title="Ø¬ÙŠØ¨ ØªÙ…Ø§Ù… Ø§Ù„Ø²Ø§ÙˆÙŠØ©">cos</button>
    <button onclick="appendText('Math.tan(')" title="Ø¸Ù„ Ø§Ù„Ø²Ø§ÙˆÙŠØ©">tan</button>
    <button onclick="appendText('Math.log10(')" title="Ù„ÙˆØºØ§Ø±ÙŠØªÙ… Ø§Ù„Ø£Ø³Ø§Ø³ 10">log</button>
    <button onclick="appendText('Math.log(')" title="Ø§Ù„Ù„ÙˆØºØ§Ø±ÙŠØªÙ… Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ ln">ln</button>
    <button onclick="appendText('(')" title="ÙØªØ­ Ù‚ÙˆØ³">(</button>
    <button onclick="appendText(')')" title="ØºÙ„Ù‚ Ù‚ÙˆØ³">)</button>
  </div>

  <div class="theme-toggle-container">
    <button id="theme-toggle" aria-label="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ ÙˆØ§Ù„ÙØ§ØªØ­">ğŸŒ“</button>
  </div>
</div>

<script>
  const display = document.getElementById('display');
  let memory = 0;

  function appendText(text) {
    if (display.textContent === '0' || display.textContent === 'Ø®Ø·Ø£') {
      display.textContent = text;
    } else {
      display.textContent += text;
    }
  }

  function clearDisplay() {
    display.textContent = '0';
  }

  function backspace() {
    if (display.textContent.length > 1) {
      display.textContent = display.textContent.slice(0, -1);
    } else {
      display.textContent = '0';
    }
  }

  function toggleSign() {
    try {
      let val = eval(display.textContent);
      val = -val;
      display.textContent = val.toString();
    } catch {
      display.textContent = 'Ø®Ø·Ø£';
    }
  }

  function calculate() {
    try {
      let expr = display.textContent.replace(/%/g, '/100');
      let result = eval(expr);
      if (result === Infinity || result === -Infinity || isNaN(result)) {
        display.textContent = 'Ø®Ø·Ø£';
      } else {
        display.textContent = result.toString();
      }
    } catch {
      display.textContent = 'Ø®Ø·Ø£';
    }
  }

  // Ø§Ù„Ø°Ø§ÙƒØ±Ø©
  function memoryClear() {
    memory = 0;
  }
  function memoryRecall() {
    if (display.textContent === '0' || display.textContent === 'Ø®Ø·Ø£') {
      display.textContent = memory.toString();
    } else {
      display.textContent += memory.toString();
    }
  }
  function memoryAdd() {
    try {
      let val = eval(display.textContent.replace(/%/g, '/100'));
      memory += val;
    } catch {}
  }
  function memorySubtract() {
    try {
      let val = eval(display.textContent.replace(/%/g, '/100'));
      memory -= val;
    } catch {}
  }

  // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ ÙˆØ§Ù„ÙØ§ØªØ­
  const themeBtn = document.getElementById('theme-toggle');
  const root = document.documentElement;

  // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø«ÙŠÙ… Ù…Ù† localStorage Ø£Ùˆ Ø¶Ø¨Ø· Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
  const savedTheme = localStorage.getItem('theme') || 'light';
  root.setAttribute('data-theme', savedTheme);

  themeBtn.onclick = () => {
    const current = root.getAttribute('data-theme');
    const newTheme = current === 'dark' ? 'light' : 'dark';
    root.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
  };
</script>

</body>
</html>